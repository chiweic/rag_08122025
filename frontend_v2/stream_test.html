<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Streaming Test</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        #response { \n            border: 1px solid #ccc; \n            padding: 10px; \n            min-height: 100px;\n            margin-top: 10px;\n            white-space: pre-wrap;\n        }\n        button { padding: 10px 20px; font-size: 16px; }\n    </style>\n</head>\n<body>\n    <h1>Streaming Response Test</h1>\n    <button onclick=\"testStream()\">Test Stream</button>\n    <div id=\"response\"></div>\n\n    <script>\n        async function testStream() {\n            const responseDiv = document.getElementById('response');\n            responseDiv.textContent = 'Connecting...\\n';\n            \n            try {\n                const response = await fetch('/api/query/stream', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ question: '禪修方法' })\n                });\n                \n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                \n                responseDiv.textContent += 'Connected. Reading stream...\\n';\n                \n                const reader = response.body.getReader();\n                const decoder = new TextDecoder('utf-8');\n                \n                while (true) {\n                    const { done, value } = await reader.read();\n                    \n                    if (done) {\n                        responseDiv.textContent += '\\nStream complete.';\n                        break;\n                    }\n                    \n                    // Decode the chunk\n                    const chunk = decoder.decode(value, { stream: true });\n                    responseDiv.textContent += chunk;\n                }\n            } catch (error) {\n                responseDiv.textContent += `\\nError: ${error.message}`;\n                console.error('Error:', error);\n            }\n        }\n    </script>\n</body>\n</html>